{% extends "elements/element.html" %}

{% set defaults = {
    element_class: "calendar-list",
    ical: '',
    start_date: '',
    end_date: '',
    dates: []
} %}

{% set module = defaults|merge( module|default({}) ) %}

{% if module.ical %}
    {% set dates = ical(module.ical, module.start_date, module.end_date) %}
{% else %}
    {% set dates = module.dates %}
{% endif %}

{% block element_content %}
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        {% for item in dates %}
            <tr>
                {% include "elements/calendar-item.html" with { module: item } %}
            </tr>
        {% endfor %}
    </table>
{% endblock %}
