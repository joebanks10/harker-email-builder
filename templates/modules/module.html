{% import "elements/grid.html" as grid %}

{% set defaults = {
    id: "",
    module_class: "",
    class: "",
    style: "",
    attributes: "",
    width: 600,
    collapse_gutters: false,
    table_style: "",
    background_img: "",
    background_style: "",
    header: [],
    content: [],
    footer: []
} %}

{% set module = defaults|merge( module|default({}) ) %}

{% if module.collapse_gutters %}
    {% set table_inner_class = "table-full" %}
{% else %}
    {% set table_inner_class = "table-inner" %}
{% endif %}

<table id="{{ module.id }}" class="module {{ module.module_class }} {{ module_classes(module.class) }}" style="{{ module.table_style }}" align="center" width="100%" border="0" cellspacing="0" cellpadding="0" {{ module.attributes }}>
    <tr>
        <td class="background" align="center" background="{{ module.background_img }}" style="background-image: url({{ module.background_img }}) {{ module.background_style }}">
            <table align="center" class="{{ table_inner_class }}" width="{{ module.width }}" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td class="container" style="{{ module.style }}">
                        {% block container %}
                            <table widht="100%" align="center" border="0" cellspacing="0" cellpadding="0">
                                {% if module.header is not empty %}
                                <tr>
                                    {% block header %}
                                        <td class="module-header">
                                            {% for element in module.header %}
                                                {{ grid.element(element, module.width) }}
                                            {% endfor %}
                                        </td>
                                    {% endblock header %}
                                </tr>
                                {% endif %}
                                <tr>
                                    {% block content %}
                                        <td class="module-content">
                                            {% for element in module.content %}
                                                {{ grid.element(element, module.width) }}
                                            {% endfor %}
                                        </td>
                                    {% endblock content %}
                                </tr>
                                {% if module.footer is not empty %}
                                <tr>
                                    {% block footer %}
                                        <td class="module-footer">
                                            {% for element in module.footer %}
                                                {{ grid.element(element, module.width) }}
                                            {% endfor %}
                                        </td>
                                    {% endblock footer %}
                                </tr>
                                {% endif %}
                            </table>
                        {% endblock container %}
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>