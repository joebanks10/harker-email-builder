{% extends "modules/module.html" %}

{% set defaults = {
    module_class: "module-2-columns",
    gutter_width: 20,
    column_count: 2
} %}

{% set module = defaults|merge( module|default({}) ) %}

{% set default_column_width =  (600 - ((module.column_count-1)*module.gutter_width))/module.column_count|round(1, 'floor') }

{% block container %}
<table class="table-rows" align="center" width="100%" border="0" cellspacing="0" cellpadding="0">
    {% for row in module.columns|batch(module.column_count) %}
        <tr>
            <td>
                {% for column in row %}
                    {% if not loop.last %}
                        <table class="table-full" width="{{ column.width|default(default_column_width) }}" border="0" align="left" cellpadding="0" cellspacing="0">
                            <tr>
                                <td align="left">
                                {% block item %}
                                    {% include "@tmpl/table-article.html" with { module: item } %}
                                {% endblock item %}
                                </td>
                            </tr>
                        </table>
                        <table width="1" border="0" cellpadding="0" cellspacing="0" align="left">
                            <tr>
                                <td height="40" style="font-size: 0;line-height: 0;border-collapse: collapse;">
                                    <p style="padding-left: 20px;">&nbsp;</p>
                                </td>
                            </tr>
                        </table>
                    {% else %}
                        <table class="table-full" width="{{ column.width|default(default_column_width) }}" border="0" align="right" cellpadding="0" cellspacing="0">
                            <tr>
                                <td align="left">
                                    {{ block('item') }}
                                </td>
                            </tr>
                        </table>
                    {% endif %}
                {% endfor %}
            </td>
        </tr>
        <tr>
            <td height="40"></td>
        </tr>
        {% endfor %}
    {% endblock row %}
</table>
    <table class="table-full" width="287" border="0" align="{{ module.position }}" cellpadding="0" cellspacing="0">
        {% block col_1 %}
            {% for element in module.col_1.elements %}
                <tr>
                    {% include "#{element.template}.html" with { module: element.options } %}
                </tr>
            {% endfor %}
        {% endblock col_1 %}
    </table>
    <table width="1" border="0" cellpadding="0" cellspacing="0" align="{{ module.position }}">
        <tr>
            <td height="40" style="font-size: 0;line-height: 0;border-collapse: collapse;">
                <p style="padding-left: 24px;">&nbsp;</p>
            </td>
        </tr>
    </table>
    <table class="table-full" width="287" border="0" align="{{ opposite_direction(module.position) }}" cellpadding="0" cellspacing="0">   
        {% block col_2 %}

        {% endblock col_2 %}
    </table>
</table>
{% endblock container %}
